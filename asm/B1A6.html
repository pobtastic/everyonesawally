<!DOCTYPE html>
<html>
<head>
<title>Everyone's a Wally: Routine at B1A6</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-wide.css" />
<link rel="stylesheet" type="text/css" href="../everyonesawally.css" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-75RERFCHBG"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-75RERFCHBG');
</script>
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="B197.html">B197</a>
</td>
<td class="up">Up: <a href="../maps/all.html#b1a6">Map</a></td>
<td class="next">
Next: <a href="B288.html">B288</a>
</td>
</tr>
</table>
<div class="description">B1A6: Routine at B1A6</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routines at <a href="AB60.html">AB60</a>, <a href="AB9B.html">AB9B</a> and <a href="B09F.html">B09F</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="b1a6"></span>B1A6</td>
<td class="instruction">LD A,(IY+$3C)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b1a9"></span>B1A9</td>
<td class="instruction">OR A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b1aa"></span>B1AA</td>
<td class="instruction">JR NZ,<a href="B1A6.html#b1b2">$B1B2</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b1ac"></span>B1AC</td>
<td class="instruction">LD A,(IY+$41)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b1af"></span>B1AF</td>
<td class="instruction">LD (IY+$3C),A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="b1b2"></span>B1B2</td>
<td class="instruction">LD (IY+$46),A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b1b5"></span>B1B5</td>
<td class="instruction">LD (IY+$4B),$00</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="b1b9"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routines at <a href="A92C.html">Handler_Move_Characters</a> and <a href="B09F.html">B09F</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="b1b9"></span>B1B9</td>
<td class="instruction">LD A,(IY+$3C)</td>
<td class="comment-1" rowspan="3">If <span class="register">IY</span>+3C is 01 jump to <a href="B1A6.html#b21c">B21C</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="b1bc"></span>B1BC</td>
<td class="instruction">CP $01</td>
</tr>
<tr>
<td class="address-1"><span id="b1be"></span>B1BE</td>
<td class="instruction">JR Z,<a href="B1A6.html#b21c">$B21C</a></td>
</tr>
<tr>
<td class="address-1"><span id="b1c0"></span>B1C0</td>
<td class="instruction">LD A,(IY+$4B)</td>
<td class="comment-1" rowspan="5"><span class="register">E</span>=(*<span class="register">IY</span>+4B)*03.</td>
</tr>
<tr>
<td class="address-1"><span id="b1c3"></span>B1C3</td>
<td class="instruction">LD E,A</td>
</tr>
<tr>
<td class="address-1"><span id="b1c4"></span>B1C4</td>
<td class="instruction">ADD A,A</td>
</tr>
<tr>
<td class="address-1"><span id="b1c5"></span>B1C5</td>
<td class="instruction">ADD A,E</td>
</tr>
<tr>
<td class="address-1"><span id="b1c6"></span>B1C6</td>
<td class="instruction">LD E,A</td>
</tr>
<tr>
<td class="address-1"><span id="b1c7"></span>B1C7</td>
<td class="instruction">LD D,$00</td>
<td class="comment-1" rowspan="1"><span class="register">D</span>=00.</td>
</tr>
<tr>
<td class="address-1"><span id="b1c9"></span>B1C9</td>
<td class="instruction">LD HL,$B264</td>
<td class="comment-1" rowspan="2"><span class="register">HL</span>=<a href="B1A6.html#b264">B264</a>+<span class="register">DE</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="b1cc"></span>B1CC</td>
<td class="instruction">ADD HL,DE</td>
</tr>
<tr>
<td class="address-1"><span id="b1cd"></span>B1CD</td>
<td class="instruction">LD E,(HL)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b1ce"></span>B1CE</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b1cf"></span>B1CF</td>
<td class="instruction">LD D,(HL)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b1d0"></span>B1D0</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b1d1"></span>B1D1</td>
<td class="instruction">LD B,(HL)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b1d2"></span>B1D2</td>
<td class="instruction">LD A,D</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b1d3"></span>B1D3</td>
<td class="instruction">DEC A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b1d4"></span>B1D4</td>
<td class="instruction">BIT 7,A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b1d6"></span>B1D6</td>
<td class="instruction">JR NZ,<a href="B1A6.html#b1ed">$B1ED</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b1d8"></span>B1D8</td>
<td class="instruction">LD A,(IY+$37)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b1db"></span>B1DB</td>
<td class="instruction">OR A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b1dc"></span>B1DC</td>
<td class="instruction">JR NZ,<a href="B1A6.html#b1ed">$B1ED</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b1de"></span>B1DE</td>
<td class="instruction">LD A,(IY+$0A)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b1e1"></span>B1E1</td>
<td class="instruction">AND %00000111</td>
<td class="comment-1" rowspan="1">Keep only bits 0-2.</td>
</tr>
<tr>
<td class="address-1"><span id="b1e3"></span>B1E3</td>
<td class="instruction">JR NZ,<a href="B1A6.html#b1ed">$B1ED</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b1e5"></span>B1E5</td>
<td class="instruction">LD (IY+$4B),$0B</td>
<td class="comment-1" rowspan="1">Write 0B to <span class="register">IY</span>+4B.</td>
</tr>
<tr>
<td class="address-1"><span id="b1e9"></span>B1E9</td>
<td class="instruction">LD B,$00</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=00.</td>
</tr>
<tr>
<td class="address-1"><span id="b1eb"></span>B1EB</td>
<td class="instruction">JR <a href="B1A6.html#b205">$B205</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="B1A6.html#b205">B205</a>.</td>
</tr>
<tr>
<td class="address-2"><span id="b1ed"></span>B1ED</td>
<td class="instruction">LD A,(IY-$3C)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b1f0"></span>B1F0</td>
<td class="instruction">OR A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b1f1"></span>B1F1</td>
<td class="instruction">CALL NZ,<a href="81D4.html">$81D4</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b1f4"></span>B1F4</td>
<td class="instruction">LD A,(IY+$0A)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b1f7"></span>B1F7</td>
<td class="instruction">ADD A,D</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b1f8"></span>B1F8</td>
<td class="instruction">LD (IY+$0A),A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b1fb"></span>B1FB</td>
<td class="instruction">LD A,(IY+$05)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b1fe"></span>B1FE</td>
<td class="instruction">SUB E</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b1ff"></span>B1FF</td>
<td class="instruction">JR NC,<a href="B1A6.html#b202">$B202</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b201"></span>B201</td>
<td class="instruction">XOR A</td>
<td class="comment-1" rowspan="2">Write 00 to <span class="register">IY</span>+05.</td>
</tr>
<tr>
<td class="address-2"><span id="b202"></span>B202</td>
<td class="instruction">LD (IY+$05),A</td>
</tr>
<tr>
<td class="address-2"><span id="b205"></span>B205</td>
<td class="instruction">LD (IY+$00),B</td>
<td class="comment-1" rowspan="1">Write <span class="register">B</span> to <span class="register">IY</span>+00.</td>
</tr>
<tr>
<td class="address-1"><span id="b208"></span>B208</td>
<td class="instruction">INC (IY+$4B)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b20b"></span>B20B</td>
<td class="instruction">LD A,(IY+$4B)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b20e"></span>B20E</td>
<td class="instruction">CP $0C</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b210"></span>B210</td>
<td class="instruction">RET NZ</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b211"></span>B211</td>
<td class="instruction">LD (IY+$3C),$00</td>
<td class="comment-1" rowspan="1">Write 00 to <span class="register">IY</span>+3C.</td>
</tr>
<tr>
<td class="address-1"><span id="b215"></span>B215</td>
<td class="instruction">LD (IY+$46),$00</td>
<td class="comment-1" rowspan="1">Write 00 to <span class="register">IY</span>+46.</td>
</tr>
<tr>
<td class="address-1"><span id="b219"></span>B219</td>
<td class="instruction">JP <a href="E2FC.html#e315">$E315</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="E2FC.html#e315">E315</a>.</td>
</tr>
<tr>
<td class="address-2"><span id="b21c"></span>B21C</td>
<td class="instruction">LD A,(IY+$4B)</td>
<td class="comment-1" rowspan="5"><span class="register">E</span>=(*<span class="register">IY</span>+4B)*03.</td>
</tr>
<tr>
<td class="address-1"><span id="b21f"></span>B21F</td>
<td class="instruction">LD E,A</td>
</tr>
<tr>
<td class="address-1"><span id="b220"></span>B220</td>
<td class="instruction">ADD A,A</td>
</tr>
<tr>
<td class="address-1"><span id="b221"></span>B221</td>
<td class="instruction">ADD A,E</td>
</tr>
<tr>
<td class="address-1"><span id="b222"></span>B222</td>
<td class="instruction">LD E,A</td>
</tr>
<tr>
<td class="address-1"><span id="b223"></span>B223</td>
<td class="instruction">LD D,$00</td>
<td class="comment-1" rowspan="1"><span class="register">D</span>=00.</td>
</tr>
<tr>
<td class="address-1"><span id="b225"></span>B225</td>
<td class="instruction">LD HL,$B264</td>
<td class="comment-1" rowspan="2"><span class="register">HL</span>=<a href="B1A6.html#b264">B264</a>+<span class="register">DE</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="b228"></span>B228</td>
<td class="instruction">ADD HL,DE</td>
</tr>
<tr>
<td class="address-1"><span id="b229"></span>B229</td>
<td class="instruction">LD E,(HL)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b22a"></span>B22A</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b22b"></span>B22B</td>
<td class="instruction">LD D,(HL)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b22c"></span>B22C</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b22d"></span>B22D</td>
<td class="instruction">LD B,(HL)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b22e"></span>B22E</td>
<td class="instruction">LD A,D</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b22f"></span>B22F</td>
<td class="instruction">DEC A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b230"></span>B230</td>
<td class="instruction">BIT 7,A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b232"></span>B232</td>
<td class="instruction">JR NZ,<a href="B1A6.html#b249">$B249</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b234"></span>B234</td>
<td class="instruction">LD A,(IY+$37)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b237"></span>B237</td>
<td class="instruction">OR A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b238"></span>B238</td>
<td class="instruction">JR NZ,<a href="B1A6.html#b249">$B249</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b23a"></span>B23A</td>
<td class="instruction">LD A,(IY+$0A)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b23d"></span>B23D</td>
<td class="instruction">AND %00000111</td>
<td class="comment-1" rowspan="1">Keep only bits 0-2.</td>
</tr>
<tr>
<td class="address-1"><span id="b23f"></span>B23F</td>
<td class="instruction">JR NZ,<a href="B1A6.html#b249">$B249</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b241"></span>B241</td>
<td class="instruction">LD (IY+$4B),$0B</td>
<td class="comment-1" rowspan="1">Write 0B to <span class="register">IY</span>+4B.</td>
</tr>
<tr>
<td class="address-1"><span id="b245"></span>B245</td>
<td class="instruction">LD B,$00</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=00.</td>
</tr>
<tr>
<td class="address-1"><span id="b247"></span>B247</td>
<td class="instruction">JR <a href="B1A6.html#b205">$B205</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="B1A6.html#b205">B205</a>.</td>
</tr>
<tr>
<td class="address-2"><span id="b249"></span>B249</td>
<td class="instruction">LD A,(IY-$3C)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b24c"></span>B24C</td>
<td class="instruction">OR A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b24d"></span>B24D</td>
<td class="instruction">CALL Z,<a href="81D4.html">$81D4</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b250"></span>B250</td>
<td class="instruction">LD A,(IY+$0A)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b253"></span>B253</td>
<td class="instruction">ADD A,D</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b254"></span>B254</td>
<td class="instruction">LD (IY+$0A),A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b257"></span>B257</td>
<td class="instruction">LD A,(IY+$05)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b25a"></span>B25A</td>
<td class="instruction">ADD A,E</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b25b"></span>B25B</td>
<td class="instruction">CP $F0</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b25d"></span>B25D</td>
<td class="instruction">JR C,<a href="B1A6.html#b202">$B202</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b25f"></span>B25F</td>
<td class="instruction">LD A,$F0</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=F0.</td>
</tr>
<tr>
<td class="address-1"><span id="b261"></span>B261</td>
<td class="instruction">JP <a href="B1A6.html#b202">$B202</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="B1A6.html#b202">B202</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="b264"></span>B264</td>
<td class="instruction">DEFB $02,$FC,$06</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b267"></span>B267</td>
<td class="instruction">DEFB $02,$FC,$06</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b26a"></span>B26A</td>
<td class="instruction">DEFB $02,$FC,$06</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b26d"></span>B26D</td>
<td class="instruction">DEFB $02,$FC,$06</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b270"></span>B270</td>
<td class="instruction">DEFB $02,$FC,$07</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b273"></span>B273</td>
<td class="instruction">DEFB $02,$FC,$07</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b276"></span>B276</td>
<td class="instruction">DEFB $02,$04,$07</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b279"></span>B279</td>
<td class="instruction">DEFB $02,$04,$07</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b27c"></span>B27C</td>
<td class="instruction">DEFB $02,$04,$06</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b27f"></span>B27F</td>
<td class="instruction">DEFB $02,$04,$06</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b282"></span>B282</td>
<td class="instruction">DEFB $02,$04,$06</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b285"></span>B285</td>
<td class="instruction">DEFB $02,$04,$00</td>
<td class="comment-1" rowspan="1"></td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="B197.html">B197</a>
</td>
<td class="up">Up: <a href="../maps/all.html#b1a6">Map</a></td>
<td class="next">
Next: <a href="B288.html">B288</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&copy; 1985 Mikro-Gen &copy; 2023 ArcadeGeek LTD.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.10.</div>
<div class="repository">Link to <a href="https://github.com/pobtastic/everyonesawally/">Source code</a>.</div>
<div><a href="../dec/asm/45478.html">Switch to decimal</a>.</div>
</footer>
</body>
</html>