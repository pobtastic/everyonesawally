<!DOCTYPE html>
<html>
<head>
<title>Everyone's a Wally: Routine at AFC4</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-wide.css" />
<link rel="stylesheet" type="text/css" href="../everyonesawally.css" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-75RERFCHBG"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-75RERFCHBG');
</script>
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="AFA3.html">AFA3</a>
</td>
<td class="up">Up: <a href="../maps/all.html#afc4">Map</a></td>
<td class="next">
Next: <a href="B00B.html">B00B</a>
</td>
</tr>
</table>
<div class="description">AFC4: Routine at AFC4</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routines at <a href="A92C.html">Handler_Move_Characters</a> and <a href="B09F.html">B09F</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="afc4"></span>AFC4</td>
<td class="instruction">LD (IY+$37),$01</td>
<td class="comment-1" rowspan="1">Write 01 to *<span class="register">IY</span>+37.</td>
</tr>
<tr>
<td class="address-1"><span id="afc8"></span>AFC8</td>
<td class="instruction">LD A,(IY+$0F)</td>
<td class="comment-1" rowspan="2"><span class="register">E</span>=current room ID (*<span class="register">IY</span>+0F).</td>
</tr>
<tr>
<td class="address-1"><span id="afcb"></span>AFCB</td>
<td class="instruction">LD E,A</td>
</tr>
<tr>
<td class="address-1"><span id="afcc"></span>AFCC</td>
<td class="instruction">LD D,$00</td>
<td class="comment-1" rowspan="1"><span class="register">D</span>=00.</td>
</tr>
<tr>
<td class="address-1"><span id="afce"></span>AFCE</td>
<td class="instruction">LD HL,$AFA3</td>
<td class="comment-1" rowspan="2"><span class="register">HL</span>=<a href="AFA3.html">Table_RoomPlatforms</a>+<span class="register">DE</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="afd1"></span>AFD1</td>
<td class="instruction">ADD HL,DE</td>
</tr>
<tr>
<td class="address-1"><span id="afd2"></span>AFD2</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="3"><span class="register">E</span>=*<span class="register">HL</span>*02.</td>
</tr>
<tr>
<td class="address-1"><span id="afd3"></span>AFD3</td>
<td class="instruction">ADD A,A</td>
</tr>
<tr>
<td class="address-1"><span id="afd4"></span>AFD4</td>
<td class="instruction">LD E,A</td>
</tr>
<tr>
<td class="address-1"><span id="afd5"></span>AFD5</td>
<td class="instruction">LD HL,$AF8F</td>
<td class="comment-1" rowspan="2"><span class="register">HL</span>=<a href="AF8F.html">Table_PlatformData</a>+<span class="register">DE</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="afd8"></span>AFD8</td>
<td class="instruction">ADD HL,DE</td>
</tr>
<tr>
<td class="address-1"><span id="afd9"></span>AFD9</td>
<td class="instruction">LD E,(HL)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="afda"></span>AFDA</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="afdb"></span>AFDB</td>
<td class="instruction">LD D,(HL)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="afdc"></span>AFDC</td>
<td class="instruction">EX DE,HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="afdd"></span>AFDD</td>
<td class="instruction">LD A,(IY+$0A)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="afe0"></span>AFE0</td>
<td class="instruction">CP $98</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="afe2"></span>AFE2</td>
<td class="instruction">JR Z,<a href="AFC4.html#b006">$B006</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="afe4"></span>AFE4</td>
<td class="instruction">ADD A,$20</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="afe6"></span>AFE6</td>
<td class="instruction">LD B,A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="afe7"></span>AFE7</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="afe8"></span>AFE8</td>
<td class="instruction">CP $FF</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="afea"></span>AFEA</td>
<td class="instruction">RET Z</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="afeb"></span>AFEB</td>
<td class="instruction">CP B</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="afec"></span>AFEC</td>
<td class="instruction">JR Z,<a href="AFC4.html#aff3">$AFF3</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="afee"></span>AFEE</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="afef"></span>AFEF</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="aff0"></span>AFF0</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="aff1"></span>AFF1</td>
<td class="instruction">JR <a href="AFC4.html#afe7">$AFE7</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="AFC4.html#afe7">AFE7</a>.</td>
</tr>
<tr>
<td class="address-2"><span id="aff3"></span>AFF3</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="aff4"></span>AFF4</td>
<td class="instruction">LD A,(IY+$05)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="aff7"></span>AFF7</td>
<td class="instruction">ADD A,$08</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="aff9"></span>AFF9</td>
<td class="instruction">SRL A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="affb"></span>AFFB</td>
<td class="instruction">SRL A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="affd"></span>AFFD</td>
<td class="instruction">SRL A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="afff"></span>AFFF</td>
<td class="instruction">CP (HL)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b000"></span>B000</td>
<td class="instruction">JR C,<a href="AFC4.html#afef">$AFEF</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b002"></span>B002</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b003"></span>B003</td>
<td class="instruction">CP (HL)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b004"></span>B004</td>
<td class="instruction">JR NC,<a href="AFC4.html#aff0">$AFF0</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="b006"></span>B006</td>
<td class="instruction">LD (IY+$37),$00</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="b00a"></span>B00A</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return.</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="AFA3.html">AFA3</a>
</td>
<td class="up">Up: <a href="../maps/all.html#afc4">Map</a></td>
<td class="next">
Next: <a href="B00B.html">B00B</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&copy; 1985 Mikro-Gen &copy; 2023 ArcadeGeek LTD.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.10.</div>
<div class="repository">Link to <a href="https://github.com/pobtastic/everyonesawally/">Source code</a>.</div>
<div><a href="../dec/asm/44996.html">Switch to decimal</a>.</div>
</footer>
</body>
</html>