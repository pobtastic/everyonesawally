<!DOCTYPE html>
<html>
<head>
<title>Everyone's a Wally: Routine at B0E6</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-wide.css" />
<link rel="stylesheet" type="text/css" href="../everyonesawally.css" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-75RERFCHBG"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-75RERFCHBG');
</script>
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="B09F.html">B09F</a>
</td>
<td class="up">Up: <a href="../maps/all.html#b0e6">Map</a></td>
<td class="next">
Next: <a href="B197.html">B197</a>
</td>
</tr>
</table>
<div class="description">B0E6: Draws Sprites To The Shadow Buffer</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routines at <a href="B9D6.html">B9D6</a>, <a href="EFC7.html">EFC7</a> and <a href="F10E.html">F10E</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">WriteSprite_ShadowBuffer</td>
<td class="address-2"><span id="b0e6"></span>B0E6</td>
<td class="instruction">EXX</td>
<td class="comment-1" rowspan="1">Switch to the shadow registers.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b0e7"></span>B0E7</td>
<td class="instruction">LD E,(IY+$23)</td>
<td class="comment-1" rowspan="1"><span class="register">E</span>=*<span class="register">IY</span>+23.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b0ea"></span>B0EA</td>
<td class="instruction">LD D,(IY+$28)</td>
<td class="comment-1" rowspan="1"><span class="register">D</span>=*<span class="register">IY</span>+28.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b0ed"></span>B0ED</td>
<td class="instruction">LD ($A83B),SP</td>
<td class="comment-1" rowspan="1">Write <span class="register">SP</span> to <a href="A83B.html">Temp_StackPointer_Storage</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b0f1"></span>B0F1</td>
<td class="instruction">LD H,(IY+$00)</td>
<td class="comment-1" rowspan="1"><span class="register">H</span>=*<span class="register">IY</span>+00.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b0f4"></span>B0F4</td>
<td class="instruction">LD L,$00</td>
<td class="comment-1" rowspan="1"><span class="register">L</span>=00.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b0f6"></span>B0F6</td>
<td class="instruction">SRL H</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b0f8"></span>B0F8</td>
<td class="instruction">RR L</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b0fa"></span>B0FA</td>
<td class="instruction">ADD HL,DE</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b0fb"></span>B0FB</td>
<td class="instruction">LD SP,HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b0fc"></span>B0FC</td>
<td class="instruction">LD A,(IY+$05)</td>
<td class="comment-1" rowspan="2"><span class="register">B</span>=*<span class="register">IY</span>+05.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b0ff"></span>B0FF</td>
<td class="instruction">LD B,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b100"></span>B100</td>
<td class="instruction">AND %00000111</td>
<td class="comment-1" rowspan="1">Keep only bits 0-2.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="b102"></span>
<div class="comments">
<div class="paragraph">
Self-modifying code.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b102"></span>B102</td>
<td class="instruction">LD ($B189),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to <a href="B0E6.html#b188">B189</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b105"></span>B105</td>
<td class="instruction">INC A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b106"></span>B106</td>
<td class="instruction">LD ($B129),A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b109"></span>B109</td>
<td class="instruction">LD ($B145),A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b10c"></span>B10C</td>
<td class="instruction">LD A,B</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b10d"></span>B10D</td>
<td class="instruction">AND %11111000</td>
<td class="comment-1" rowspan="1">Keep only bits 3-7.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b10f"></span>B10F</td>
<td class="instruction">RRCA</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b110"></span>B110</td>
<td class="instruction">RRCA</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b111"></span>B111</td>
<td class="instruction">RRCA</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="b112"></span>
<div class="comments">
<div class="paragraph">
Self-modifying code.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b112"></span>B112</td>
<td class="instruction">LD ($B17B),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to <a href="B0E6.html#b17a">B17B</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b115"></span>B115</td>
<td class="instruction">ADD A,$02</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b117"></span>B117</td>
<td class="instruction">LD E,A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b118"></span>B118</td>
<td class="instruction">LD C,$20</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b11a"></span>B11A</td>
<td class="instruction">LD L,(IY+$0A)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b11d"></span>B11D</td>
<td class="instruction">LD H,$00</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b11f"></span>B11F</td>
<td class="instruction">ADD HL,HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b120"></span>B120</td>
<td class="instruction">ADD HL,HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b121"></span>B121</td>
<td class="instruction">ADD HL,HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b122"></span>B122</td>
<td class="instruction">ADD HL,HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b123"></span>B123</td>
<td class="instruction">ADD HL,HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b124"></span>B124</td>
<td class="instruction">LD D,$63</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b126"></span>B126</td>
<td class="instruction">ADD HL,DE</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">WriteSprite_ShadowBuffer_0</td>
<td class="address-2"><span id="b127"></span>B127</td>
<td class="instruction">POP DE</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b128"></span>B128</td>
<td class="instruction">LD B,$00</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b12a"></span>B12A</td>
<td class="instruction">DEC B</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b12b"></span>B12B</td>
<td class="instruction">JR Z,<a href="B0E6.html#b139">WriteSprite_ShadowBuffer_2</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b12d"></span>B12D</td>
<td class="instruction">SCF</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b12e"></span>B12E</td>
<td class="instruction">LD A,$FF</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">WriteSprite_ShadowBuffer_1</td>
<td class="address-2"><span id="b130"></span>B130</td>
<td class="instruction">RR E</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b132"></span>B132</td>
<td class="instruction">RR D</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b134"></span>B134</td>
<td class="instruction">RRA</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b135"></span>B135</td>
<td class="instruction">DJNZ <a href="B0E6.html#b130">WriteSprite_ShadowBuffer_1</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b137"></span>B137</td>
<td class="instruction">AND (HL)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b138"></span>B138</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">WriteSprite_ShadowBuffer_2</td>
<td class="address-2"><span id="b139"></span>B139</td>
<td class="instruction">DEC HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b13a"></span>B13A</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b13b"></span>B13B</td>
<td class="instruction">AND D</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b13c"></span>B13C</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b13d"></span>B13D</td>
<td class="instruction">DEC HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b13e"></span>B13E</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b13f"></span>B13F</td>
<td class="instruction">AND E</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b140"></span>B140</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b141"></span>B141</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b142"></span>B142</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b143"></span>B143</td>
<td class="instruction">POP DE</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b144"></span>B144</td>
<td class="instruction">LD B,$00</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b146"></span>B146</td>
<td class="instruction">DEC B</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b147"></span>B147</td>
<td class="instruction">JR Z,<a href="B0E6.html#b153">WriteSprite_ShadowBuffer_4</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b149"></span>B149</td>
<td class="instruction">XOR A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">WriteSprite_ShadowBuffer_3</td>
<td class="address-2"><span id="b14a"></span>B14A</td>
<td class="instruction">SRL E</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b14c"></span>B14C</td>
<td class="instruction">RR D</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b14e"></span>B14E</td>
<td class="instruction">RRA</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b14f"></span>B14F</td>
<td class="instruction">DJNZ <a href="B0E6.html#b14a">WriteSprite_ShadowBuffer_3</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b151"></span>B151</td>
<td class="instruction">OR (HL)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b152"></span>B152</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">WriteSprite_ShadowBuffer_4</td>
<td class="address-2"><span id="b153"></span>B153</td>
<td class="instruction">DEC HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b154"></span>B154</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b155"></span>B155</td>
<td class="instruction">OR D</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b156"></span>B156</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b157"></span>B157</td>
<td class="instruction">DEC HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b158"></span>B158</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b159"></span>B159</td>
<td class="instruction">OR E</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b15a"></span>B15A</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b15b"></span>B15B</td>
<td class="instruction">LD DE,$0022</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b15e"></span>B15E</td>
<td class="instruction">ADD HL,DE</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b15f"></span>B15F</td>
<td class="instruction">DEC C</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b160"></span>B160</td>
<td class="instruction">JP NZ,<a href="B0E6.html#b127">WriteSprite_ShadowBuffer_0</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b163"></span>B163</td>
<td class="instruction">LD A,(IY+$0A)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b166"></span>B166</td>
<td class="instruction">AND %00000111</td>
<td class="comment-1" rowspan="1">Keep only bits 0-2.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b168"></span>B168</td>
<td class="instruction">JR Z,<a href="B0E6.html#b16e">WriteSprite_ShadowBuffer_5</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b16a"></span>B16A</td>
<td class="instruction">LD B,$05</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b16c"></span>B16C</td>
<td class="instruction">JR <a href="B0E6.html#b170">WriteSprite_ShadowBuffer_6</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="b16e"></span>
<div class="comments">
<div class="paragraph">
Characters are 04 characters tall.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">WriteSprite_ShadowBuffer_5</td>
<td class="address-2"><span id="b16e"></span>B16E</td>
<td class="instruction">LD B,$04</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=04 (counter).</td>
</tr>
<tr>
<td class="asm-label">WriteSprite_ShadowBuffer_6</td>
<td class="address-2"><span id="b170"></span>B170</td>
<td class="instruction">LD A,(IY+$0A)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<span class="register">IY</span>+0A.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b173"></span>B173</td>
<td class="instruction">AND %11111000</td>
<td class="comment-1" rowspan="1">Keep only bits 3-7.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b175"></span>B175</td>
<td class="instruction">LD H,$00</td>
<td class="comment-1" rowspan="2">Create an offset in <span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b177"></span>B177</td>
<td class="instruction">LD L,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b178"></span>B178</td>
<td class="instruction">ADD HL,HL</td>
<td class="comment-1" rowspan="4"><span class="register">HL</span>=<a href="FAEF.html#fb00">FB00</a>+(<span class="register">HL</span>*04).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b179"></span>B179</td>
<td class="instruction">ADD HL,HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b17a"></span>B17A</td>
<td class="instruction">LD DE,$FB00</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b17d"></span>B17D</td>
<td class="instruction">ADD HL,DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b17e"></span>B17E</td>
<td class="instruction">LD DE,$001E</td>
<td class="comment-1" rowspan="1"><span class="register">DE</span>=001E.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="b181"></span>
<div class="comments">
<div class="paragraph">
Grab the characters attribute byte.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b181"></span>B181</td>
<td class="instruction">LD C,(IY+$1E)</td>
<td class="comment-1" rowspan="1"><span class="register">C</span>=*<span class="register">IY</span>+1E.</td>
</tr>
<tr>
<td class="asm-label">WriteSprite_ShadowBuffer_7</td>
<td class="address-2"><span id="b184"></span>B184</td>
<td class="instruction">LD (HL),C</td>
<td class="comment-1" rowspan="1">Write the attribute byte to the attribute buffer (*<span class="register">HL</span>).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b185"></span>B185</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1">Increment <span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b186"></span>B186</td>
<td class="instruction">LD (HL),C</td>
<td class="comment-1" rowspan="1">Write the attribute byte to the attribute buffer (*<span class="register">HL</span>).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b187"></span>B187</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1">Increment <span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="b188"></span>
<div class="comments">
<div class="paragraph">
This is modified from <a href="B0E6.html#b102">B102</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b188"></span>B188</td>
<td class="instruction">LD A,$FF</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=FF.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b18a"></span>B18A</td>
<td class="instruction">OR A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b18b"></span>B18B</td>
<td class="instruction">JR Z,<a href="B0E6.html#b18e">WriteSprite_ShadowBuffer_8</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b18d"></span>B18D</td>
<td class="instruction">LD (HL),C</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">WriteSprite_ShadowBuffer_8</td>
<td class="address-2"><span id="b18e"></span>B18E</td>
<td class="instruction">ADD HL,DE</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b18f"></span>B18F</td>
<td class="instruction">DJNZ <a href="B0E6.html#b184">WriteSprite_ShadowBuffer_7</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b191"></span>B191</td>
<td class="instruction">EXX</td>
<td class="comment-1" rowspan="1">Switch to the normal registers.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b192"></span>B192</td>
<td class="instruction">LD SP,($A83B)</td>
<td class="comment-1" rowspan="1">Restore <span class="register">SP</span> from <a href="A83B.html">Temp_StackPointer_Storage</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="b196"></span>B196</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return.</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="B09F.html">B09F</a>
</td>
<td class="up">Up: <a href="../maps/all.html#b0e6">Map</a></td>
<td class="next">
Next: <a href="B197.html">B197</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&copy; 1985 Mikro-Gen &copy; 2023 ArcadeGeek LTD.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.10.</div>
<div class="repository">Link to <a href="https://github.com/pobtastic/everyonesawally/">Source code</a>.</div>
<div><a href="../dec/asm/45286.html">Switch to decimal</a>.</div>
</footer>
</body>
</html>