<!DOCTYPE html>
<html>
<head>
<title>Everyone's a Wally: Routine at 58153</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-wide.css" />
<link rel="stylesheet" type="text/css" href="../everyonesawally.css" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-75RERFCHBG"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-75RERFCHBG');
</script>
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="58108.html">58108</a>
</td>
<td class="up">Up: <a href="../maps/all.html#58153">Map</a></td>
<td class="next">
Next: <a href="58323.html">58323</a>
</td>
</tr>
</table>
<div class="description">58153: Routine at E329</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routines at <a href="60714.html">60714</a>, <a href="61383.html">61383</a>, <a href="61710.html">61710</a> and <a href="62961.html">62961</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="58153"></span>58153</td>
<td class="instruction">LD A,(43064)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<a href="43064.html">43064</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="58156"></span>58156</td>
<td class="instruction">SUB (IY+5)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="58159"></span>58159</td>
<td class="instruction">SUB 13</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="58161"></span>58161</td>
<td class="instruction">CP 230</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="58163"></span>58163</td>
<td class="instruction">RET C</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="58164"></span>58164</td>
<td class="instruction">LD A,(43065)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="58167"></span>58167</td>
<td class="instruction">SUB (IY+10)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="58170"></span>58170</td>
<td class="instruction">SUB 28</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="58172"></span>58172</td>
<td class="instruction">CP 214</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="58174"></span>58174</td>
<td class="instruction">RET C</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="58175"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routines at <a href="61710.html">61710</a>, <a href="62961.html">62961</a> and <a href="63508.html">63508</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="58175"></span>58175</td>
<td class="instruction">LD A,(46431)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="58178"></span>58178</td>
<td class="instruction">OR A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="58179"></span>58179</td>
<td class="instruction">RET NZ</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="58180"></span>58180</td>
<td class="instruction">EXX</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="58181"></span>58181</td>
<td class="instruction">LD BC,25610</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="58184"></span>58184</td>
<td class="instruction">LD DE,257</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="58187"></span>58187</td>
<td class="instruction">LD HL,25601</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="58190"></span>58190</td>
<td class="instruction">CALL <a href="58323.html">58323</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="58193"></span>58193</td>
<td class="instruction">LD A,(62062)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="58196"></span>58196</td>
<td class="instruction">LD B,A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="58197"></span>58197</td>
<td class="instruction">LD A,(IY+20)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="58200"></span>58200</td>
<td class="instruction">SUB B</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="58201"></span>58201</td>
<td class="instruction">LD (IY+20),A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="58204"></span>58204</td>
<td class="instruction">JR Z,<a href="58153.html#58210">58210</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="58206"></span>58206</td>
<td class="instruction">JR C,<a href="58153.html#58210">58210</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="58208"></span>58208</td>
<td class="instruction">JR <a href="58153.html#58220">58220</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="58210"></span>58210</td>
<td class="instruction">LD (IY+20),128</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="58214"></span>58214</td>
<td class="instruction">DEC (IY+45)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="58217"></span>58217</td>
<td class="instruction">JP Z,<a href="46161.html">GameOver</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="58220"></span>58220</td>
<td class="instruction">EXX</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="58221"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routines at <a href="58365.html">PrintBanner</a> and <a href="63508.html">63508</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="58221"></span>58221</td>
<td class="instruction">EXX</td>
<td class="comment-1" rowspan="1">Switch to the shadow registers.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="58222"></span>
<div class="comments">
<div class="paragraph">
Draw the hearts to indicate the number of lives remaining.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-1"><span id="58222"></span>58222</td>
<td class="instruction">LD C,70</td>
<td class="comment-1" rowspan="1"><span class="register">C</span>=70 (INK:
YELLOW,
PAPER:
BLACK
(BRIGHT)
).</td>
</tr>
<tr>
<td class="address-1"><span id="58224"></span>58224</td>
<td class="instruction">LD HL,57308</td>
<td class="comment-1" rowspan="2">Write <a href="53692.html#57308">Font</a> to <a href="47034.html#47080">47081</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="58227"></span>58227</td>
<td class="instruction">LD (47081),HL</td>
</tr>
<tr>
<td class="address-1"><span id="58230"></span>58230</td>
<td class="instruction">LD DE,540</td>
<td class="comment-1" rowspan="1"><span class="register">DE</span>=540.</td>
</tr>
<tr>
<td class="address-1"><span id="58233"></span>58233</td>
<td class="instruction">LD L,(IY+45)</td>
<td class="comment-1" rowspan="1"><span class="register">L</span>=*<span class="register">IY</span>+45.</td>
</tr>
<tr>
<td class="address-1"><span id="58236"></span>58236</td>
<td class="instruction">DEC L</td>
<td class="comment-1" rowspan="1">Decrease <span class="register">L</span> by one.</td>
</tr>
<tr>
<td class="address-1"><span id="58237"></span>58237</td>
<td class="instruction">LD B,2</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=2 (counter).</td>
</tr>
<tr>
<td class="address-2"><span id="58239"></span>58239</td>
<td class="instruction">LD A,L</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="58240"></span>58240</td>
<td class="instruction">OR A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="58241"></span>58241</td>
<td class="instruction">LD A,31</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=<a href="53692.html#57556">31</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="58243"></span>58243</td>
<td class="instruction">JR NZ,<a href="58153.html#58246">58246</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="58245"></span>58245</td>
<td class="instruction">INC A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="58246"></span>58246</td>
<td class="instruction">CALL <a href="47034.html">DrawSprite</a></td>
<td class="comment-1" rowspan="1">Call <a href="47034.html">DrawSprite</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="58249"></span>58249</td>
<td class="instruction">INC E</td>
<td class="comment-1" rowspan="2">Increment <span class="register">E</span> by two.</td>
</tr>
<tr>
<td class="address-1"><span id="58250"></span>58250</td>
<td class="instruction">INC E</td>
</tr>
<tr>
<td class="address-1"><span id="58251"></span>58251</td>
<td class="instruction">CP 32</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="58253"></span>58253</td>
<td class="instruction">JR Z,<a href="58153.html#58256">58256</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="58255"></span>58255</td>
<td class="instruction">DEC L</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="58256"></span>58256</td>
<td class="instruction">DJNZ <a href="58153.html#58239">58239</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="58258"></span>
<div class="comments">
<div class="paragraph">
Draws the endurance ribbon.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-1"><span id="58258"></span>58258</td>
<td class="instruction">LD C,67</td>
<td class="comment-1" rowspan="1"><span class="register">C</span>=67 (INK:
MAGENTA,
PAPER:
BLACK
(BRIGHT)
).</td>
</tr>
<tr>
<td class="address-1"><span id="58260"></span>58260</td>
<td class="instruction">LD DE,784</td>
<td class="comment-1" rowspan="1"><span class="register">DE</span>=784.</td>
</tr>
<tr>
<td class="address-1"><span id="58263"></span>58263</td>
<td class="instruction">LD L,92</td>
<td class="comment-1" rowspan="1"><span class="register">L</span>=<a href="53692.html#58044">92</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="58265"></span>58265</td>
<td class="instruction">LD B,(IY+20)</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=*<span class="register">IY</span>+20.</td>
</tr>
<tr>
<td class="address-2"><span id="58268"></span>58268</td>
<td class="instruction">LD A,B</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="58269"></span>58269</td>
<td class="instruction">SUB 8</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="58271"></span>58271</td>
<td class="instruction">JR C,<a href="58153.html#58300">58300</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="58273"></span>58273</td>
<td class="instruction">LD B,A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="58274"></span>58274</td>
<td class="instruction">LD A,L</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="58275"></span>58275</td>
<td class="instruction">CALL <a href="47034.html">DrawSprite</a></td>
<td class="comment-1" rowspan="1">Call <a href="47034.html">DrawSprite</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="58278"></span>58278</td>
<td class="instruction">XOR 1</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="58280"></span>58280</td>
<td class="instruction">LD L,A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="58281"></span>58281</td>
<td class="instruction">INC E</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="58282"></span>58282</td>
<td class="instruction">LD A,B</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="58283"></span>58283</td>
<td class="instruction">OR A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="58284"></span>58284</td>
<td class="instruction">JR NZ,<a href="58153.html#58268">58268</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="58286"></span>58286</td>
<td class="instruction">BIT 5,E</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="58288"></span>58288</td>
<td class="instruction">JR Z,<a href="58153.html#58292">58292</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="58290"></span>58290</td>
<td class="instruction">EXX</td>
<td class="comment-1" rowspan="1">Switch back to the normal registers.</td>
</tr>
<tr>
<td class="address-1"><span id="58291"></span>58291</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return.</td>
</tr>
<tr>
<td class="address-2"><span id="58292"></span>58292</td>
<td class="instruction">LD A,32</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=32.</td>
</tr>
<tr>
<td class="address-1"><span id="58294"></span>58294</td>
<td class="instruction">CALL <a href="47034.html">DrawSprite</a></td>
<td class="comment-1" rowspan="1">Call <a href="47034.html">DrawSprite</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="58297"></span>58297</td>
<td class="instruction">INC E</td>
<td class="comment-1" rowspan="1">Increment <span class="register">E</span> by one.</td>
</tr>
<tr>
<td class="address-1"><span id="58298"></span>58298</td>
<td class="instruction">JR <a href="58153.html#58286">58286</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="58153.html#58286">58286</a>.</td>
</tr>
<tr>
<td class="address-2"><span id="58300"></span>58300</td>
<td class="instruction">ADD A,8</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>+=8.</td>
</tr>
<tr>
<td class="address-1"><span id="58302"></span>58302</td>
<td class="instruction">SRL A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="58304"></span>58304</td>
<td class="instruction">LD B,A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="58305"></span>58305</td>
<td class="instruction">LD A,L</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="58306"></span>58306</td>
<td class="instruction">CP 92</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="58308"></span>58308</td>
<td class="instruction">JR NZ,<a href="58153.html#58314">58314</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="58310"></span>58310</td>
<td class="instruction">LD A,93</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=93.</td>
</tr>
<tr>
<td class="address-1"><span id="58312"></span>58312</td>
<td class="instruction">JR <a href="58153.html#58316">58316</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="58153.html#58316">58316</a>.</td>
</tr>
<tr>
<td class="address-2"><span id="58314"></span>58314</td>
<td class="instruction">LD A,96</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=96.</td>
</tr>
<tr>
<td class="address-2"><span id="58316"></span>58316</td>
<td class="instruction">ADD A,B</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>+=<span class="register">B</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="58317"></span>58317</td>
<td class="instruction">CALL <a href="47034.html">DrawSprite</a></td>
<td class="comment-1" rowspan="1">Call <a href="47034.html">DrawSprite</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="58320"></span>58320</td>
<td class="instruction">INC E</td>
<td class="comment-1" rowspan="1">Increment <span class="register">E</span> by one.</td>
</tr>
<tr>
<td class="address-1"><span id="58321"></span>58321</td>
<td class="instruction">JR <a href="58153.html#58286">58286</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="58153.html#58286">58286</a>.</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="58108.html">58108</a>
</td>
<td class="up">Up: <a href="../maps/all.html#58153">Map</a></td>
<td class="next">
Next: <a href="58323.html">58323</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&copy; 1985 Mikro-Gen &copy; 2023 ArcadeGeek LTD.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.10.</div>
<div class="repository">Link to <a href="https://github.com/pobtastic/everyonesawally/">Source code</a>.</div>
<div><a href="../../asm/E329.html">Switch to hexadecimal</a>.</div>
</footer>
</body>
</html>